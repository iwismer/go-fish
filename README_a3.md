# Go Fish

Isaac Wismer  
wismeri@uoguelph.ca  
0959337  
CIS*4450 W19  

A simple game of go fish written in python using PyQt5.

## File Structure

### Folders

**design:** The REST API design stuff  
**go_fish:** All the classes related to the game of go fish  
**ui:** The files that contain the UI design. These can be opened with Qt5 Designer  
**uml:** The UML diagram in XMI and PDF format. Umbrello was used to create the diagram  

### Files

#### root

**controller_go_fish_gui:** The controller object for the GUI. It interacts with the controller in `main.py`  
**main_window.py:** This is the main GUI for the game.  
**main.py:** This is the main class that runs the whole program, and represents the interface between the GUI and the game.  
**setup_dialog.py:** This is the setup window for the game.  

#### design

**README.md:** The general description, technologies and justification for the API  
**REST Design.md:** The endpoints for the REST API  

#### go_fish

**card.py:** The card related classes (Suit, Card)  
**deck.py:** The deck related classes (Deck [abstract], PokerDeck)  
**game.py:** The Game [abstract] class  
**go_fish.py:** The GoFish class, a subclass of Game  
**hand.py:** The Hand class  
**player.py:** The Player [abstract], HumanPlayer and BotPlayer classes  

#### ui

**output_frame.py:** A frame that is used to show the output of each bot. These are dynamically places on the GUI depending on how many bots are playing.
**pairs_frame.py:** A frame that is used to show the score and pairs for each player. These are dynamically places on the GUI depending on how many bots are playing.
**Ui_dialog.py:** The GUI class generated by pyuic for the game over/error dialog  
**Ui_go_fish.py:** The GUI class for the main window of the game. Generated by pyuic.  
**Ui_setup.py:** The GUI class for the setup window. Generated by pyuic.  

## Building & Running

This project requires Python 3.7 (it may work on Python 3.6 but I have not tested that) and and for the modules PyQt5, requests and zeep to be installed through pip (or python-[package] through your package manager). It does not run on the SOCS server as it only has Python 3.5.3  
This program has a GUI written in Qt, and does not have a CLI implementation.

### Virtual Environment

From within the project folder:

```sh
python3.7 -m venv venv
source venv/bin/activate
pip3.7 install pyqt5
pip3.7 install requests
pip3.7 install zeep
python3.7 main.py
```

### Native

Generally the dependencies are installed with the command `pip3.7 install pyqt5 requests zeep`  
To run, use the command: `python3.7 main.py`  

## Using the program

The window shown when the program starts allows you to choose the number of bots you wish to play against, their difficulty, and set their and your names. You can also open an existing game from this window.  
The game begins when you press "Play Go Fish". First, all players put down any pairs that they have in their hands.  
It is always the human player's turn first. Select a card from your hand that you would like to ask for a match for using the radio buttons on the left. Then push a the button for the bot you would like to ask for if they have a card of the same number.  
See the output on the right for the outcome of the ask. If the bot did not have a matching card, you will automatically go fish, and each bot will take their turn. It will then be your turn again. If you did get a match, you will get to go again.  
All bot actions are automatic using my advanced (totally not RNG) AI. You can see the outcome from their turns in their respective output boxes.  
A game can be saved at any time using the "Save Game" option in the File menu. The same goes for the "Open Game" option in the same menu for opening an old game.

To demonstrate the portable object, I have added a "Print Hand to JSON" menu item, which will print your player's hand to STDOUT.

There are also keyboard shortcuts in the main window:
- Ctrl+O = Open Game
- Ctrl+S = Save Game
- Ctrl+N = New game
- Ctrl+Q = Quit

## Learning Outcomes

### REST and SOAP Consumption

The SOAP service is demonstrated in `main.py`, right at the bottom of the file. It checks for 2 command line arguments, and then searches for the lyrics of that artist and song.  
`./go_fish/main.py 'David Bowie' 'Modern Love'` is an example of how to use it.

The REST service is used to generate the names for the bots. THe implementation can be found in `setup_dialog.py`. The app makes a call to the API to fetch 10 names, and will refresh again when it runs out of names.

### OO Showcase

Check out the files in the `go_fish` sub-folder. These are the classes that represent the go fish game. You can see the layout of these classes in the PDF in the `uml` folder.

#### Abstraction and Encapsulation

For all instance variables in classes, I use "private" variables (prefixed with an underscore), and then use properties for access them. Many variables do not have properties to discourage their use outside the class, as they are considered implementation details.  
There are some abstract classes, where it does not make sense to have a generic object, like in Deck and Game.

#### Inheritance and Composition

To see the layout of the classes, take a look at the UML diagram. There is a good mix of composition and sub-classing, used where appropriate for each class. It is reasonable to have a subclass of deck for a poker deck, and have a deck composed of cards, as this conceptually makes sense.

This project is not large enough to warrant much inherence, but I feel that within the scope of this project I have done an excellent job balancing enough inheritance to reduce duplicate code, and allow for class reuse, but not so much that it becomes hard to understand.

I do make use of abstract classes when inheritance occurs, in the `Game` and `Deck` classes.

The classes are loosely coupled to allow these to be used for other games, like in a board game app, or in a more complex card game.

#### Programming by Contract

All methods that change the state of the objects (except getters and setters), have pre and post conditions where applicable. This helps people using the methods to ensure they are using them correctly.

I also use type hinted to help ensure that the correct variable types are used as parameters, and so that it is clear what types are being returned by the function.

#### Style

I follow Python's PEP 8 style guide throughout my code, and use docstrings for each method. My code is indented entirely with spaces, has one newline at the end of each file, has header comments at the top of each file and uses sensible snake case names for variables and methods.

#### UML

I also include a diagram of my classes as I feel that this helps people better understand the program. The diagram uses the correct symbols for connectors and typeface for the names.

#### MVC

As seen in the UML diagram, I have separated the model from the view through the use of 2 controllers, one for the model, one for the view. These communicate with the other controller and the thing they are controlling. This allows the implementation of either a new model or view to no change the other at all. In fact, it would be easily possible to replace the Qt interface with a REST one.

### SOAP vs REST

REST = Representational State Transfer  
SOAP = Simple Object Access Protocol  

- SOAP is a protocol, while REST is an architectural style
- REST can use a variety of data formats (JSON, text, XML, binary) while SOAP can only use XML
- REST is usually faster and uses less data and bandwidth
- REST is generally considered easier
- SOAP can provide greater transactional reliability than HTTP
- SOAP allows state to be maintained, while REST is strictly stateless
- SOAP clients tend to be much more tightly coupled to the server
- SOAP supports better security through WS-Security, REST only has inherits its security from its transport

One huge advantage of SOAP is that it requires more of a client server contract than REST. Because of WSDL, the API is documented by default. REST on the other hand, relies on the developer or maintainer to keep up to date documentation on the API.  
Since SOAP is much more structured, it is easier to validate. This makes it a prime candidate for services where transactions need to be verified, like in the financial industry.

REST allows for very flexible and easy to implement APIs, because it does not enforce a contract between the server and client, and it allows for many more data types to be exchanged. For languages like JavaScript (and other related languages), REST allows the use of JSON, rather than being forced into XML.

SOAP is documented by default in WSDL, which means that each method, and each parameter, and each return is documented in a human and machine readable format. This allows SOAP to be used in systems that do not have any human interaction at all. The APIs can be discovered and interacted with, without any human intervention. REST does not have any equivalent system.

Objects can be represented easily in both, and can both be used for object transfer, although SOAP was specifically designed for this (as alluded to by the name).

#### APIs where you might use SOAP

- Systems where transactions need to be validated and error checked thoroughly
- Systems where XML is already being used
- Systems where security of the payload needs to be ensured right from sender to receiver, not just in transit
- A system where the API may need to be discovered and used without human interaction
- A system where HTTP is not the ideal transport protocol

#### APIs where you might use REST

- Small, quick projects
- APIs where different kinds of data are sent or received
- Systems where security is not a priority
- Systems where bandwidth, performance and data usage are at a premium
- Systems that need to be directly compatible with a web browser

#### Sources

- <https://en.wikipedia.org/wiki/SOAP>
- <https://en.wikipedia.org/wiki/REST>
- <https://www.upwork.com/hiring/development/soap-vs-rest-comparing-two-apis/>
- <https://www.soapui.org/learn/api/soap-vs-rest-api.html>
- <https://stackify.com/soap-vs-rest/>
- <https://stackoverflow.com/questions/19884295/soap-vs-rest-differences>
- <https://knowledgecenter.zuora.com/DC_Developers/G_SOAP_API>
- <https://www.ibm.com/developerworks/xml/library/x-soapbx1/index.html>
- And a bunch of other links I visited before I realized I needed to save sources
